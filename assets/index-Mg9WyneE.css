:root{--color-bg: #f8fafc;--color-bgSecondary: #e2e8f0;--color-bgTertiary: #cbd5e1;--color-text: #1e293b;--color-textSecondary: #475569;--color-textMuted: #94a3b8;--color-primary: #3b82f6;--color-primaryHover: #2563eb;--color-accent: #10b981;--color-danger: #ef4444;--color-warning: #f59e0b;--color-border: #e2e8f0;--color-shadow: rgba(0, 0, 0, .1);--color-overlay: rgba(0, 0, 0, .5);--color-mapFloor: #f1f5f9;--color-mapWall: #64748b;--color-mapZone: rgba(59, 130, 246, .1);--color-mapZoneBorder: rgba(59, 130, 246, .3);--color-mapDesk: #fbbf24;--color-mapSpot: #10b981;--color-avatarDefault: #3b82f6}[data-theme="theme:night"]{--color-bg: #0f172a;--color-bgSecondary: #1e293b;--color-bgTertiary: #334155;--color-text: #f1f5f9;--color-textSecondary: #cbd5e1;--color-textMuted: #64748b;--color-primary: #60a5fa;--color-primaryHover: #3b82f6;--color-accent: #34d399;--color-danger: #f87171;--color-warning: #fbbf24;--color-border: #334155;--color-shadow: rgba(0, 0, 0, .4);--color-overlay: rgba(0, 0, 0, .7);--color-mapFloor: #1e293b;--color-mapWall: #475569;--color-mapZone: rgba(96, 165, 250, .15);--color-mapZoneBorder: rgba(96, 165, 250, .4);--color-mapDesk: #d97706;--color-mapSpot: #34d399;--color-avatarDefault: #60a5fa}[data-theme="theme:mono"]{--color-bg: #fafafa;--color-bgSecondary: #e5e5e5;--color-bgTertiary: #d4d4d4;--color-text: #171717;--color-textSecondary: #404040;--color-textMuted: #737373;--color-primary: #404040;--color-primaryHover: #171717;--color-accent: #525252;--color-danger: #525252;--color-warning: #737373;--color-border: #d4d4d4;--color-shadow: rgba(0, 0, 0, .1);--color-overlay: rgba(0, 0, 0, .5);--color-mapFloor: #f5f5f5;--color-mapWall: #525252;--color-mapZone: rgba(82, 82, 82, .1);--color-mapZoneBorder: rgba(82, 82, 82, .3);--color-mapDesk: #a3a3a3;--color-mapSpot: #525252;--color-avatarDefault: #404040}*,*:before,*:after{box-sizing:border-box;margin:0;padding:0}html,body{height:100%;overflow:hidden;font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:14px;line-height:1.5;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body{background-color:var(--color-bg);color:var(--color-text)}a{color:var(--color-primary);text-decoration:none}a:hover{text-decoration:underline}button{font-family:inherit;font-size:inherit;cursor:pointer;border:none;background:none}input,textarea{font-family:inherit;font-size:inherit;border:1px solid var(--color-border);border-radius:6px;padding:8px 12px;background:var(--color-bg);color:var(--color-text);outline:none;transition:border-color .2s,box-shadow .2s}input:focus,textarea:focus{border-color:var(--color-primary);box-shadow:0 0 0 3px #3b82f626}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-track{background:var(--color-bgSecondary)}::-webkit-scrollbar-thumb{background:var(--color-textMuted);border-radius:4px}::-webkit-scrollbar-thumb:hover{background:var(--color-textSecondary)}.hidden{display:none!important}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}:root{--header-h: 48px}#app{display:flex;flex-direction:column;height:100vh;width:100vw;overflow:hidden}#menubar{display:flex;align-items:center;justify-content:space-between;height:var(--header-h);padding:0 16px;background:var(--color-bgSecondary);border-bottom:1px solid var(--color-border);flex:0 0 auto;z-index:100}#menubar .logo{font-weight:600;font-size:16px;color:var(--color-text);display:flex;align-items:center;gap:8px}#menubar .logo-icon{width:24px;height:24px;background:var(--color-primary);border-radius:6px}#menubar .nav{display:flex;gap:4px}#menubar .nav-btn{display:flex;align-items:center;gap:6px;padding:8px 12px;border-radius:6px;color:var(--color-textSecondary);transition:all .2s}#menubar .nav-btn:hover{background:var(--color-bgTertiary);color:var(--color-text)}#menubar .nav-btn.active{background:var(--color-primary);color:#fff}#menubar .nav-btn svg{width:18px;height:18px}#menubar .nav-dropdown{position:relative}#menubar .nav-dropdown-content{display:none;position:absolute;top:100%;left:0;margin-top:4px;min-width:120px;background:var(--color-bgSecondary);border:1px solid var(--color-border);border-radius:8px;box-shadow:0 4px 12px #00000026;z-index:100;overflow:hidden}#menubar .nav-dropdown.open .nav-dropdown-content{display:block}#menubar .nav-dropdown-item{display:block;width:100%;padding:10px 14px;text-align:left;color:var(--color-text);background:transparent;border:none;cursor:pointer;transition:background .15s}#menubar .nav-dropdown-item:hover{background:var(--color-bgTertiary)}#menubar .nav-dropdown-item.active{background:var(--color-primary);color:#fff}#menubar .status-indicator{display:flex;align-items:center;gap:8px}#menubar .status-dot{width:10px;height:10px;border-radius:50%;background:var(--color-accent)}#menubar .status-dot.away{background:var(--color-warning)}#menubar .status-dot.focus{background:var(--color-danger)}#main{flex:1 1 auto;min-height:0;display:flex;overflow:hidden;position:relative}#canvas-container{flex:1 1 auto;min-width:0;min-height:0;height:calc(100vh - var(--header-h));position:relative;overflow:hidden;background:var(--color-mapFloor);touch-action:none}#map-canvas{width:100%;height:100%;display:block;cursor:crosshair;touch-action:none}#context-panel{position:absolute;bottom:24px;left:50%;transform:translate(-50%);background:var(--color-bg);border:1px solid var(--color-border);border-radius:12px;padding:12px 16px;box-shadow:0 4px 20px var(--color-shadow);display:flex;align-items:center;gap:12px;z-index:50;opacity:0;pointer-events:none;transition:opacity .2s}#context-panel.visible{opacity:1;pointer-events:auto}#context-panel .panel-title{font-weight:600;color:var(--color-text);white-space:nowrap}#context-panel .panel-actions{display:flex;gap:8px;flex-wrap:wrap}#context-panel{flex-wrap:wrap;max-width:min(92vw,720px)}.context-status{font-size:13px;color:var(--color-textSecondary);margin-left:8px}.context-substatus{font-size:12px;color:var(--color-textMuted, #888);margin-left:8px}.btn{display:inline-flex;align-items:center;justify-content:center;gap:6px;padding:8px 16px;border-radius:6px;font-weight:500;transition:all .2s}.btn-primary{background:var(--color-primary);color:#fff}.btn-primary:hover{background:var(--color-primaryHover)}.btn-secondary{background:var(--color-bgTertiary);color:var(--color-text)}.btn-secondary:hover{background:var(--color-border)}.btn-danger{background:var(--color-danger);color:#fff}.btn:disabled{opacity:.5;cursor:not-allowed}#drawer-overlay{position:fixed;inset:0;background:var(--color-overlay);z-index:200;opacity:0;pointer-events:none;transition:opacity .3s}#drawer-overlay.visible{opacity:1;pointer-events:auto}#drawer{position:fixed;top:0;right:0;width:360px;max-width:90vw;height:100%;background:var(--color-bg);border-left:1px solid var(--color-border);z-index:210;transform:translate(100%);transition:transform .3s ease;display:flex;flex-direction:column}#drawer.open{transform:translate(0)}.drawer-header{display:flex;align-items:center;justify-content:space-between;padding:16px;border-bottom:1px solid var(--color-border);flex-shrink:0}.drawer-title{font-size:18px;font-weight:600;color:var(--color-text)}.drawer-close{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:6px;color:var(--color-textSecondary);transition:all .2s}.drawer-close:hover{background:var(--color-bgSecondary);color:var(--color-text)}.drawer-content{flex:1;overflow-y:auto;padding:16px}.chat-tabs{display:flex;gap:4px;padding:0 16px 12px;border-bottom:1px solid var(--color-border)}.chat-tab{padding:8px 16px;border-radius:6px;color:var(--color-textSecondary);font-weight:500;transition:all .2s}.chat-tab:hover{background:var(--color-bgSecondary)}.chat-tab:disabled,.chat-tab.disabled{opacity:.5;cursor:not-allowed;background:transparent}.chat-tab.active{background:var(--color-primary);color:#fff}.chat-messages{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:12px}.chat-message{display:flex;gap:10px}.chat-avatar{width:32px;height:32px;border-radius:50%;background:var(--color-avatarDefault);flex-shrink:0;display:flex;align-items:center;justify-content:center;color:#fff;font-size:12px;font-weight:600}.chat-body{flex:1;min-width:0}.chat-name{font-weight:600;font-size:13px;color:var(--color-text)}.chat-time{font-size:11px;color:var(--color-textMuted);margin-left:8px}.chat-text{color:var(--color-textSecondary);word-wrap:break-word}#menubar .nav-btn[data-drawer=chat]{position:relative}#menubar .chat-unread-dot{position:absolute;top:6px;right:6px;width:8px;height:8px;border-radius:999px;background:var(--color-danger);display:none}#menubar .chat-unread-dot.visible{display:block}.chat-empty{margin:24px 8px;color:var(--color-textMuted);font-size:13px;text-align:center}.chat-section-title{margin:10px 4px 2px;font-size:12px;font-weight:700;letter-spacing:.02em;color:var(--color-textSecondary)}.chat-thread-item{width:100%;text-align:left;border:1px solid var(--color-border);border-radius:10px;padding:10px 12px;background:var(--color-bgPrimary);color:var(--color-text)}.chat-thread-item:hover{background:var(--color-bgSecondary)}.chat-thread-header{display:flex;justify-content:space-between;align-items:center;gap:8px;margin-bottom:4px}.chat-thread-preview{color:var(--color-textSecondary);font-size:12px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.chat-thread-unread{margin-top:6px;font-size:11px;color:#dc2626;font-weight:600}.chat-input-container{padding:12px 16px;border-top:1px solid var(--color-border);display:flex;gap:8px}.chat-input{flex:1}.people-list{display:flex;flex-direction:column;gap:8px}.person-item{display:flex;align-items:center;gap:12px;padding:12px;border-radius:8px;cursor:pointer;transition:background .2s}.person-item:hover{background:var(--color-bgSecondary)}.person-avatar{width:40px;height:40px;border-radius:50%;background:var(--color-avatarDefault);position:relative;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600}.person-status{position:absolute;bottom:0;right:0;width:12px;height:12px;border-radius:50%;border:2px solid var(--color-bg);background:var(--color-accent)}.person-status.away{background:var(--color-warning)}.person-status.focus{background:var(--color-danger)}.person-info{flex:1;min-width:0}.person-name-row{display:flex;align-items:center;gap:8px;min-width:0}.person-name{font-weight:600;color:var(--color-text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.person-call-badge{font-size:11px;color:var(--color-primary);background:color-mix(in srgb,var(--color-primary) 12%,transparent);border:1px solid color-mix(in srgb,var(--color-primary) 25%,transparent);border-radius:999px;padding:1px 6px;white-space:nowrap}.person-location{font-size:12px;color:var(--color-textMuted)}.person-actions{display:flex;gap:4px}.person-action-btn{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:6px;color:var(--color-textSecondary);transition:all .2s}.person-action-btn:hover{background:var(--color-bgTertiary);color:var(--color-primary)}.search-input-container{position:relative;margin-bottom:16px}.search-input{width:100%;padding-left:40px}.search-icon{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:var(--color-textMuted)}.settings-section{margin-bottom:24px}.settings-label{font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;color:var(--color-textMuted);margin-bottom:12px}.theme-options{display:flex;gap:8px}.theme-option{flex:1;padding:12px;border-radius:8px;border:2px solid var(--color-border);text-align:center;transition:all .2s}.theme-option:hover{border-color:var(--color-textMuted)}.theme-option.active{border-color:var(--color-primary);background:#3b82f61a}.theme-preview{width:48px;height:32px;border-radius:4px;margin:0 auto 8px}.theme-name{font-weight:500;font-size:13px}#modal-overlay{position:fixed;inset:0;background:var(--color-overlay);z-index:300;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .3s}#modal-overlay.visible{opacity:1;pointer-events:auto}.modal{background:var(--color-bg);border-radius:16px;box-shadow:0 20px 60px var(--color-shadow);width:400px;max-width:90vw;max-height:90vh;overflow:hidden;transform:scale(.9);transition:transform .3s}#modal-overlay.visible .modal{transform:scale(1)}.modal-header{padding:20px 24px;border-bottom:1px solid var(--color-border)}.modal-title{font-size:20px;font-weight:600;color:var(--color-text)}.modal-subtitle{font-size:14px;color:var(--color-textSecondary);margin-top:4px}.modal-body{padding:24px}.modal-footer{padding:16px 24px;border-top:1px solid var(--color-border);display:flex;justify-content:flex-end;gap:12px}.form-group{margin-bottom:16px}.form-label{display:block;font-size:13px;font-weight:500;color:var(--color-textSecondary);margin-bottom:6px}.form-input{width:100%}.form-checkbox{display:flex;align-items:center;gap:8px;cursor:pointer}.form-checkbox input{width:18px;height:18px;accent-color:var(--color-primary)}.form-error{color:var(--color-danger);font-size:13px;margin-top:8px}.form-hint{color:var(--color-textMuted);font-size:12px;margin-top:4px}#toast-container{position:fixed;top:60px;right:16px;z-index:400;display:flex;flex-direction:column;gap:8px}.toast{background:var(--color-bg);border:1px solid var(--color-border);border-radius:8px;padding:12px 16px;box-shadow:0 4px 12px var(--color-shadow);display:flex;align-items:center;gap:12px;min-width:280px;max-width:400px;animation:slideIn .3s ease}.toast.leaving{animation:slideOut .3s ease forwards}@keyframes slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}@keyframes slideOut{0%{transform:translate(0);opacity:1}to{transform:translate(100%);opacity:0}}.toast-icon{width:20px;height:20px;flex-shrink:0}.toast-message{flex:1;color:var(--color-text)}.toast-close{color:var(--color-textMuted);padding:4px}.toast-close:hover{color:var(--color-text)}#loading-screen{position:fixed;inset:0;background:var(--color-bg);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:500}.loading-spinner{width:48px;height:48px;border:3px solid var(--color-border);border-top-color:var(--color-primary);border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.loading-text{margin-top:16px;color:var(--color-textSecondary)}.spot-modal-overlay{position:fixed;inset:0;background:#00000080;z-index:350;display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:opacity .3s}.spot-modal-overlay.visible{opacity:1;pointer-events:auto}.spot-modal{background:var(--color-bg);border-radius:16px;box-shadow:0 20px 60px var(--color-shadow);width:400px;max-width:90vw;max-height:90vh;overflow:hidden;transform:scale(.9);transition:transform .3s}.spot-modal-overlay.visible .spot-modal{transform:scale(1)}.spot-modal .modal-header{display:flex;align-items:center;justify-content:space-between;padding:20px 24px;border-bottom:1px solid var(--color-border)}.modal-close-btn{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:6px;color:var(--color-textSecondary);transition:all .2s;background:none;border:none;cursor:pointer}.modal-close-btn:hover{background:var(--color-bgSecondary);color:var(--color-text)}.spot-links-list{display:flex;flex-direction:column;gap:8px}.bgm-track-list{max-height:320px;overflow-y:auto}.ambient-list{max-height:300px;overflow-y:auto}.spot-link-item{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;background:var(--color-bgSecondary);border-radius:10px;text-decoration:none;color:var(--color-text);font-weight:500;transition:all .2s;border:1px solid transparent}.spot-link-item[data-active=true]{outline:2px solid rgba(16,185,129,.6);background:#10b98114}.spot-playing{font-size:12px;color:#10b981e6}.bgm-now-playing{margin-bottom:8px}.bgm-now-playing strong{color:var(--color-accent);font-weight:700}#interact-hint{position:fixed;left:50%;bottom:18px;transform:translate(-50%);background:#0f172ad9;color:#fff;padding:8px 12px;border-radius:10px;font-size:12px;z-index:420;pointer-events:none;opacity:0;transition:opacity .2s}#interact-hint.visible{opacity:1}.library-modal-content{display:flex;flex-direction:column;gap:12px}.library-grid{display:flex;gap:16px;flex-wrap:wrap}.library-pane{flex:1 1 240px;min-width:220px}.library-actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}.library-section-title{font-size:12px;color:var(--color-textSecondary);margin-bottom:8px}.library-list{display:flex;flex-direction:column;gap:8px;max-height:320px;overflow-y:auto}.library-list-item{display:flex;flex-direction:column;align-items:flex-start;padding:10px 12px;border-radius:10px;border:1px solid var(--color-border);background:var(--color-bgSecondary);color:var(--color-text);text-align:left}.library-list-item.active{border-color:var(--color-primary);background:#10b98114}.library-list-title{font-weight:600}.library-list-meta{font-size:12px;color:var(--color-textSecondary)}.library-empty{color:var(--color-textSecondary);font-size:12px}.library-detail-name{font-size:18px;font-weight:700}.library-detail-meta{font-size:12px;color:var(--color-textSecondary);margin-bottom:8px}.library-detail-bio{font-size:13px;margin-bottom:10px}.library-detail-tags{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:10px}.library-tag{background:var(--color-bgSecondary);border:1px solid var(--color-border);border-radius:999px;padding:2px 8px;font-size:11px}.library-detail-updated{font-size:11px;color:var(--color-textSecondary)}.library-notes-section{margin-top:16px;padding-top:16px;border-top:1px solid var(--color-border)}.library-notes-title{font-size:13px;font-weight:600;color:var(--color-text);margin-bottom:12px}.library-notes-list{display:flex;flex-direction:column;gap:8px;max-height:200px;overflow-y:auto;margin-bottom:12px}.library-note-item{padding:10px 12px;background:var(--color-bgSecondary);border:1px solid var(--color-border);border-radius:8px}.library-note-header{display:flex;align-items:center;gap:8px;margin-bottom:4px}.library-note-kind{display:inline-block;padding:2px 8px;font-size:10px;font-weight:600;text-transform:uppercase;border-radius:999px;background:var(--color-primary);color:#fff}.library-note-kind.kudos{background:#f59e0b}.library-note-kind.info{background:#3b82f6}.library-note-kind.skill{background:#8b5cf6}.library-note-author{font-size:11px;color:var(--color-textSecondary)}.library-note-content{font-size:13px;color:var(--color-text);line-height:1.4}.library-note-form{display:flex;flex-direction:column;gap:8px}.library-note-form-row{display:flex;gap:8px}.library-note-form select{flex-shrink:0;width:100px}.library-note-form textarea{resize:vertical;min-height:60px}.library-revisions-section{margin-top:16px}.library-revisions-list{display:flex;flex-direction:column;gap:8px;max-height:240px;overflow-y:auto}.library-revision-item{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;background:var(--color-bgSecondary);border:1px solid var(--color-border);border-radius:8px}.library-revision-info{flex:1}.library-revision-editor{font-size:13px;font-weight:500;color:var(--color-text)}.library-revision-date{font-size:11px;color:var(--color-textSecondary)}.library-revert-btn{padding:6px 12px;font-size:11px;background:var(--color-bgTertiary);border:1px solid var(--color-border);border-radius:6px;color:var(--color-text);cursor:pointer;transition:all .15s}.library-revert-btn:hover{background:var(--color-primary);border-color:var(--color-primary);color:#fff}.library-error{padding:12px;background:#ef44441a;border:1px solid rgba(239,68,68,.3);border-radius:8px;color:#ef4444;font-size:13px;margin-bottom:12px}.library-loading{display:flex;align-items:center;justify-content:center;padding:24px;color:var(--color-textSecondary);font-size:13px}.library-loading:before{content:"";width:16px;height:16px;border:2px solid var(--color-border);border-top-color:var(--color-primary);border-radius:50%;animation:spin 1s linear infinite;margin-right:8px}.library-editor-info{display:flex;align-items:center;gap:8px;padding:8px 12px;background:var(--color-bgSecondary);border-radius:8px;font-size:11px;color:var(--color-textSecondary);margin-top:12px}.library-editor-label{font-weight:500;color:var(--color-text)}.editor-label-modal-overlay{position:fixed;inset:0;background:#0009;display:flex;align-items:center;justify-content:center;z-index:10000;opacity:0;pointer-events:none;transition:opacity .2s}.editor-label-modal-overlay.visible{opacity:1;pointer-events:auto}.editor-label-modal{background:var(--color-bg);border-radius:12px;width:360px;max-width:90vw;box-shadow:0 16px 48px #0000004d;transform:scale(.9);transition:transform .2s}.editor-label-modal-overlay.visible .editor-label-modal{transform:scale(1)}.editor-label-modal-header{padding:20px 24px 0}.editor-label-modal-header h3{margin:0;font-size:18px;color:var(--color-text)}.editor-label-modal-body{padding:16px 24px}.editor-label-hint{font-size:13px;color:var(--color-textSecondary);margin:0 0 12px}.editor-label-error{color:#ef4444;font-size:12px;min-height:1em;margin-top:8px}.editor-label-modal-footer{display:flex;justify-content:flex-end;gap:8px;padding:16px 24px;border-top:1px solid var(--color-border)}.spot-link-item:hover{background:var(--color-bgTertiary);border-color:var(--color-primary);color:var(--color-primary)}.spot-link-label{flex:1}.spot-link-icon{flex-shrink:0;opacity:.5}.spot-link-item:hover .spot-link-icon{opacity:1}.bulletin-content{min-height:200px}.bulletin-placeholder{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:40px 20px;color:var(--color-textMuted)}.bulletin-placeholder p{margin-top:16px;font-size:14px}.bulletin-hint{font-size:12px;opacity:.6;margin-top:4px}.admin-modal-overlay{position:fixed;inset:0;background:#0009;display:flex;align-items:center;justify-content:center;z-index:10000;opacity:0;pointer-events:none;transition:opacity .2s}.admin-modal-overlay.visible{opacity:1;pointer-events:auto}.admin-modal{background:var(--color-bgSecondary);border-radius:12px;width:90%;max-width:600px;max-height:80vh;overflow:hidden;display:flex;flex-direction:column;box-shadow:0 16px 48px #0006}.admin-view{padding:24px}.admin-view h2{margin:0 0 16px;font-size:20px;color:var(--color-text)}.admin-view input[type=password],.admin-view input[type=text],.admin-view input[type=url],.admin-view input[type=date],.admin-view textarea{width:100%;padding:10px 12px;border:1px solid var(--color-border);border-radius:6px;background:var(--color-bgPrimary);color:var(--color-text);font-size:14px;margin-bottom:12px}.admin-view input:focus,.admin-view textarea:focus{outline:none;border-color:var(--color-primary)}.admin-error{color:var(--color-danger);font-size:13px;margin-bottom:12px;min-height:1em}.admin-buttons{display:flex;gap:8px;margin-top:16px}.admin-btn{padding:10px 20px;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;border:1px solid var(--color-border);background:var(--color-bgTertiary);color:var(--color-text);transition:all .15s}.admin-btn:hover{background:var(--color-bgSecondary)}.admin-btn.primary{background:var(--color-primary);border-color:var(--color-primary);color:#fff}.admin-btn.primary:hover{opacity:.9}.admin-btn.danger{color:var(--color-danger)}.admin-btn.small{padding:6px 12px;font-size:12px}.admin-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.admin-header h2{margin:0}.admin-tabs{display:flex;gap:4px;margin-bottom:16px;border-bottom:1px solid var(--color-border);padding-bottom:8px}.admin-tab{padding:8px 16px;border-radius:6px 6px 0 0;font-size:13px;cursor:pointer;background:none;border:none;color:var(--color-textSecondary);transition:all .15s}.admin-tab:hover{background:var(--color-bgTertiary)}.admin-tab.active{background:var(--color-primary);color:#fff}.admin-tab-content{flex:1;overflow-y:auto;max-height:350px;padding:4px}.admin-footer{display:flex;justify-content:flex-end;gap:8px;padding:16px 24px;border-top:1px solid var(--color-border);background:var(--color-bgTertiary)}.admin-editor{display:flex;flex-direction:column;gap:12px}.admin-list{display:flex;flex-direction:column;gap:8px}.admin-item{background:var(--color-bgPrimary);border:1px solid var(--color-border);border-radius:8px;padding:12px}.item-header{display:flex;align-items:center;gap:8px}.item-title{font-weight:500;color:var(--color-text);flex:1}.item-date{font-size:12px;color:var(--color-textMuted)}.item-meta{font-size:12px;color:var(--color-textSecondary);margin-top:4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.item-actions{display:flex;gap:4px}.item-btn{width:28px;height:28px;padding:0;display:flex;align-items:center;justify-content:center;font-size:14px;border-radius:4px;border:1px solid var(--color-border);background:var(--color-bgSecondary);cursor:pointer;transition:all .15s}.item-btn:hover:not(:disabled){background:var(--color-bgTertiary)}.item-btn:disabled{opacity:.3;cursor:not-allowed}.item-btn.danger:hover{background:var(--color-danger);color:#fff;border-color:var(--color-danger)}.admin-form{display:flex;flex-direction:column;gap:4px}.admin-form h3{margin:0 0 12px;font-size:16px;color:var(--color-text)}.admin-form label{font-size:12px;font-weight:500;color:var(--color-textSecondary);margin-top:8px}.admin-export{display:flex;flex-direction:column;gap:12px}.admin-export h3{margin:0;font-size:14px;color:var(--color-text)}.admin-export p{margin:0;font-size:12px;color:var(--color-textSecondary)}.admin-export textarea{font-family:monospace;font-size:11px;resize:vertical}.admin-status{font-size:13px;padding:8px 12px;border-radius:6px}.admin-status.success{background:#4caf501a;color:var(--color-accent)}.admin-status.error{background:#f443361a;color:var(--color-danger)}#debug-hud{display:none}body.debug-hud-on #debug-hud{display:block!important}.spot-link-header{display:flex;justify-content:space-between;align-items:center;width:100%}.spot-link-desc{font-size:13px;color:var(--color-textSecondary);margin-top:4px}.spot-link-tags{display:flex;gap:6px;margin-top:8px;flex-wrap:wrap}.spot-tag{font-size:11px;padding:2px 6px;background:var(--color-bgTertiary);border-radius:4px;color:var(--color-textSecondary)}.bulletin-list{display:flex;flex-direction:column;gap:8px}.bulletin-item{background:var(--color-bgPrimary);border:1px solid var(--color-border);border-radius:8px;padding:12px;cursor:pointer;transition:all .2s}.bulletin-item:hover{border-color:var(--color-primary)}.bulletin-item.expanded{background:var(--color-bgSecondary)}.bulletin-header{display:flex;justify-content:space-between;align-items:center}.bulletin-title{font-weight:500;color:var(--color-text)}.bulletin-date{font-size:12px;color:var(--color-textMuted)}.bulletin-body{margin-top:8px;font-size:14px;color:var(--color-textSecondary);display:none;line-height:1.5;border-top:1px solid var(--color-border);padding-top:8px}.bulletin-item.expanded .bulletin-body{display:block}#companion-root{isolation:isolate;contain:content}#companion-dot{position:fixed;right:20px;bottom:20px;z-index:9999;display:flex;align-items:center;gap:8px;pointer-events:auto}#companion-dot.is-left{left:20px;right:auto}#companion-dot .companion-dot-button{width:56px;height:56px;border-radius:999px;border:1px solid rgba(15,23,42,.18);background:#fff;box-shadow:0 8px 24px #0f172a33;display:grid;place-items:center;overflow:hidden;position:relative;flex-shrink:0}#companion-dot .companion-dot-button img{width:100%;height:100%;object-fit:cover}#companion-dot .companion-dot-fallback{font-size:28px;line-height:1;display:none}#companion-dot .companion-dot-callout{background:#fff;color:#111827;border:1px solid rgba(15,23,42,.12);border-radius:999px;padding:6px 10px;font-size:12px;font-weight:700;box-shadow:0 6px 16px #0f172a29;display:none}#companion-dot .companion-dot-badge{min-width:20px;height:20px;padding:0 6px;border-radius:999px;background:#dc2626;color:#fff;font-size:11px;font-weight:700;display:none;align-items:center;justify-content:center}#companion-dot.has-unread .companion-dot-callout,#companion-dot.has-unread .companion-dot-badge{display:inline-flex}#companion-dot .companion-dot-mini{position:absolute;right:0;bottom:calc(100% + 10px);background:#fff;color:#111827;border:1px solid rgba(15,23,42,.12);border-radius:10px;padding:6px 10px;font-size:12px;font-weight:700;box-shadow:0 6px 16px #0f172a29;opacity:0;transform:translateY(6px);pointer-events:none;transition:opacity .16s ease,transform .16s ease}#companion-dot .companion-dot-mini.visible{opacity:1;transform:translateY(0)}#companion-panel{position:fixed;right:20px;bottom:92px;width:min(360px,calc(100vw - 24px));max-height:min(74vh,620px);border:1px solid rgba(15,23,42,.14);border-radius:14px;background:#fff;box-shadow:0 16px 36px #0f172a47;z-index:9999;overflow:hidden;pointer-events:auto}#companion-panel.is-hidden{display:none}#companion-panel.is-closed{display:none;pointer-events:none}#companion-panel .vc{display:flex;flex-direction:column;min-height:440px;max-height:min(74vh,620px)}#companion-panel .vc .companion-head{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:10px 12px;border-bottom:1px solid rgba(15,23,42,.09);background:linear-gradient(180deg,#f8fafc,#eef2f7)}#companion-panel .vc .companion-head-main{display:flex;align-items:center;gap:10px;min-width:0}#companion-panel .vc .companion-head-avatar{width:28px;height:28px;border-radius:999px;object-fit:cover;border:1px solid rgba(15,23,42,.12)}#companion-panel .vc .companion-head-title{font-size:13px;font-weight:700;color:#111827}#companion-panel .vc .companion-head-sub{font-size:11px;color:#475569}#companion-panel .vc .companion-close{width:28px;height:28px;border-radius:8px;display:grid;place-items:center;color:#334155}#companion-panel .vc .companion-close:hover{background:#0f172a0f}#companion-panel .vc .companion-tabs{display:grid;grid-template-columns:1fr 1fr;gap:0;border-bottom:1px solid rgba(15,23,42,.09);background:#f8fafc}#companion-panel .vc .companion-tab{height:36px;font-size:11px;letter-spacing:.08em;color:#475569;font-weight:700}#companion-panel .vc .companion-tab.is-active{color:#0f172a;background:#fff}#companion-panel .vc .companion-tab-panel{display:flex;flex-direction:column;min-height:0;flex:1}#companion-panel .vc .companion-tab-panel.is-hidden{display:none}#companion-panel .vc .companion-log{padding:10px;overflow:auto;flex:1;background:#fff}#companion-panel .vc .companion-msg{max-width:90%;margin-bottom:8px;padding:8px 10px;border-radius:10px;font-size:13px;line-height:1.45;white-space:pre-wrap;word-break:break-word}#companion-panel .vc .companion-msg.user{margin-left:auto;background:#0ea5e9;color:#fff}#companion-panel .vc .companion-msg.ai{margin-right:auto;background:#f1f5f9;color:#0f172a}#companion-panel .vc .companion-msg.typing{margin-right:auto;background:#f8fafc;color:#334155}#companion-panel .vc .companion-typing-dots{display:inline-flex;gap:2px;margin-left:4px}#companion-panel .vc .companion-typing-dots span{animation:companion-dot-blink 1s infinite}#companion-panel .vc .companion-typing-dots span:nth-child(2){animation-delay:.12s}#companion-panel .vc .companion-typing-dots span:nth-child(3){animation-delay:.24s}@keyframes companion-dot-blink{0%,to{opacity:.3}50%{opacity:1}}#companion-panel .vc .companion-form{border-top:1px solid rgba(15,23,42,.09);padding:10px;display:flex;gap:8px;background:#f8fafc}#companion-panel .vc .companion-input,#companion-panel .vc .vc-input,#companion-panel .vc .vc-range{width:100%;min-width:0;border:1px solid rgba(15,23,42,.16);border-radius:8px;padding:8px 10px;font-size:13px;background:#fff;color:#0f172a}#companion-panel .vc .vc-range{padding:0;height:28px}#companion-panel .vc .companion-send{border-radius:8px;background:#0ea5e9;color:#fff;font-weight:700;padding:0 12px}#companion-panel .vc .companion-send:disabled{opacity:.6}#companion-panel .vc .vc-settings{padding:12px;overflow:auto;display:grid;gap:10px;background:#fff}#companion-panel .vc .companion-settings-root{min-height:0}#companion-panel .vc .vc-preview{min-height:110px;border:1px dashed rgba(15,23,42,.18);border-radius:10px;background:radial-gradient(circle at top left,#f8fafc,#eef2ff);position:relative;padding:10px}#companion-panel .vc .vc-preview-avatar-wrap{width:56px;height:56px;border-radius:999px;overflow:hidden;border:1px solid rgba(15,23,42,.18);background:#fff}#companion-panel .vc .vc-preview-avatar{width:100%;height:100%;object-fit:cover}#companion-panel .vc .vc-preview-bubble{position:absolute;left:78px;top:20px;max-width:calc(100% - 92px);background:#fff;border:1px solid rgba(15,23,42,.16);border-radius:10px;padding:6px 10px;font-size:12px;line-height:1.4;transform-origin:left top}#companion-panel .vc .vc-field{display:grid;gap:4px}#companion-panel .vc .vc-switch-field{grid-template-columns:auto auto 1fr;align-items:center;gap:8px}#companion-panel .vc .vc-label{font-size:11px;font-weight:700;letter-spacing:.02em;color:#475569}#companion-panel .vc .vc-value{font-size:11px;color:#334155}#companion-panel .vc .vc-settings-actions{display:flex;gap:8px}#companion-panel .vc .companion-btn-sub{border:1px solid rgba(15,23,42,.16);border-radius:8px;padding:8px 10px;font-size:12px;font-weight:700;background:#f8fafc;color:#0f172a}#companion-panel .vc .companion-btn-sub:hover{background:#eef2ff}#companion-menu-btn{position:relative}#companion-menu-badge{position:absolute;top:4px;right:4px;min-width:16px;height:16px;padding:0 4px;border-radius:999px;background:#dc2626;color:#fff;font-size:10px;font-weight:700;display:none;align-items:center;justify-content:center}#companion-menu-badge.visible{display:inline-flex}@media(max-width:767px){#companion-dot{right:12px;left:auto;bottom:12px}#companion-dot.is-left{left:12px;right:auto;bottom:12px}#companion-panel{right:12px;left:12px;width:auto;bottom:80px;max-height:68vh}#companion-panel .vc{min-height:420px;max-height:68vh}}
